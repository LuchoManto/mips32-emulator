#executable files go in bin folder, includes test executables
#.o files go in build folder
# .c and .h files go in scr folder

#make test compiles the tests
#make clear deletes unnecesary files

CC=gcc
FLAGS=-pg
#OBJ=build/main.o build/environment.o build/environmentcommands.o build/disassembler.o build/memorymanagement.o build/errors.o build/lookup.o

BUILDDIR=build
SCRDIR=src

OBJ := $(patsubst %.c,%.o,$(wildcard $(SRCDIR)/*.c))
include elfapi/Makefile

bin/emul-mips: $(OBJ)
	$(CC) -o emul-mips $(OBJ)

build/main.o: src/main.c src/headers.h src/environment.h src/disassembler.h src/memorymanagement.h src/lookup.h
build/environmentcommands.o: src/environmentcommands.c src/environmentcommands.h src/disassembler.h src/headers.h src/memorymanagement.h src/errors.h src/lookup.h
build/environment.o: src/environment.c src/environment.h src/environmentcommands.h src/headers.h src/errors.h
build/disassembler.o: src/disassembler.c src/disassembler.h src/headers.h src/errors.h src/environment.h src/lookup.h
build/lookup.o: src/lookup.c src/lookup.h src/headers.h
build/memorymanagement.o: src/memorymanagement.c src/headers.h src/lookup.h
build/errors.o: src/errors.c src/errors.h

clean:
	-rm bin/emul-mips $(OBJ)
